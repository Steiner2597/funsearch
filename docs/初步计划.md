# FunSearch-Lite é¡¹ç›®è®¡åˆ’

> **é¡¹ç›®çŠ¶æ€**: âœ… æ ¸å¿ƒåŠŸèƒ½å·²å®ç°  
> **æœ€åæ›´æ–°**: 2026å¹´2æœˆ13æ—¥  
> **å›¢é˜Ÿæˆå‘˜**: é¹¿è”š (59479207), æ¨ä¸œè¾‰ (59807244), ä¸æ–‡å®— (12345678)

---

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªã€FunSearch é£æ ¼çš„ LLM å¼•å¯¼è¿›åŒ–æœç´¢ç³»ç»Ÿã€‘ï¼Œç”¨äºå­¦æ ¡ CS5491 AI è¯¾ç¨‹çš„å¤§å‹é¡¹ç›® (City University of Hong Kong, Spring 2026)ã€‚

è¿™ä¸ªé¡¹ç›®çš„ç›®æ ‡ä¸æ˜¯å•æ¬¡ç”Ÿæˆä»£ç ï¼Œè€Œæ˜¯ï¼š
- é€šè¿‡ LLM + è¿›åŒ–æœç´¢
- åœ¨æ˜ç¡®å¯è¯„ä¼°çš„ä»»åŠ¡ä¸Š (Online Bin Packing)
- è‡ªåŠ¨å‘ç°å’Œæ”¹è¿›ç®—æ³•/ç­–ç•¥
- å¹¶èƒ½ç”¨å®éªŒæ•°æ®è¯æ˜å…¶æœ‰æ•ˆæ€§

---

## âœ… å·²å®ŒæˆåŠŸèƒ½

### é¡¹ç›®æ€»ä½“ç›®æ ‡

é¡¹ç›®åç§°ï¼š**FunSearch-Lite**ï¼ˆResearch-oriented, Reproducibleï¼‰

ç³»ç»Ÿå·²å…·å¤‡ä»¥ä¸‹æ ¸å¿ƒç‰¹å¾ï¼š
1. âœ… ä»¥ Python ä»£ç ä½œä¸ºæœç´¢ç©ºé—´ï¼ˆå‡½æ•°çº§åˆ«ï¼‰
2. âœ… é€šè¿‡ LLM ç”Ÿæˆå€™é€‰å‡½æ•°
3. âœ… ä½¿ç”¨è‡ªåŠ¨è¯„ä¼°å‡½æ•°æ‰“åˆ†
4. âœ… é€šè¿‡è¿›åŒ–å¼å¾ªç¯ä¸æ–­æ”¹è¿›
5. âœ… ä¿ç•™å¤šæ ·æ€§ï¼ˆå¤šå²›æ¨¡å‹ + è¡Œä¸ºç­¾åï¼‰
6. âœ… å…¨è¿‡ç¨‹å¯å¤ç°ã€å¯è§‚æµ‹ã€å¯è§†åŒ–

### æŠ€æœ¯çº¦æŸæ»¡è¶³æƒ…å†µ

- âœ… ç¼–ç¨‹è¯­è¨€ï¼šPython 3.10+
- âœ… å•æœºè¿è¡Œï¼Œæ— åˆ†å¸ƒå¼ä¾èµ–
- âœ… æ‰€æœ‰ç”Ÿæˆçš„ä»£ç é€šè¿‡æ²™ç®±å®‰å…¨æ‰§è¡Œ
- âœ… è¯„ä¼°å‡½æ•°æ˜¯ç¡®å®šæ€§çš„ã€è‡ªåŠ¨åŒ–çš„ã€äº§ç”Ÿæ•°å€¼ score

---

## ğŸ“ å·²å®ç°çš„ç³»ç»Ÿæ¶æ„

```
funsearch/
â”œâ”€â”€ run.py                   # ç»Ÿä¸€å…¥å£ (æ¨èä½¿ç”¨)
â”œâ”€â”€ pyproject.toml           # é¡¹ç›®é…ç½®
â”‚
â”œâ”€â”€ funsearch_core/          # æ ¸å¿ƒè¿›åŒ–ç®—æ³• âœ…
â”‚   â”œâ”€â”€ loop.py              # ä¸»å¾ªç¯ (å« tqdm è¿›åº¦)
â”‚   â”œâ”€â”€ population.py        # ç§ç¾¤ç®¡ç†
â”‚   â”œâ”€â”€ islands.py           # å¤šå²›æ¨¡å‹ (åˆ›æ–°ç‚¹3)
â”‚   â”œâ”€â”€ diversity.py         # è¡Œä¸ºç­¾åå¤šæ ·æ€§ (åˆ›æ–°ç‚¹3)
â”‚   â”œâ”€â”€ deduplication.py     # åŠŸèƒ½çº§å»é‡ (åˆ›æ–°ç‚¹1)
â”‚   â”œâ”€â”€ selection.py         # é€‰æ‹©ç­–ç•¥
â”‚   â””â”€â”€ schemas.py           # æ•°æ®ç»“æ„å®šä¹‰
â”‚
â”œâ”€â”€ evaluator/               # ä»»åŠ¡è¯„ä¼° âœ…
â”‚   â”œâ”€â”€ bin_packing.py       # Bin Packing å®ç° (å¤šä¿çœŸåº¦)
â”‚   â”œâ”€â”€ datasets.py          # OR-Library æ•°æ®é›†åŠ è½½å™¨
â”‚   â”œâ”€â”€ heuristics.py        # åŸºçº¿å¯å‘å¼ (FFD, BFD)
â”‚   â””â”€â”€ base.py              # è¯„ä¼°å™¨åŸºç±»
â”‚
â”œâ”€â”€ llm/                     # LLM é›†æˆå±‚ âœ…
â”‚   â”œâ”€â”€ providers.py         # å¤šå‚å•†æ”¯æŒ (OpenAI/DeepSeek)
â”‚   â”œâ”€â”€ prompts.py           # Prompt æ¨¡æ¿
â”‚   â”œâ”€â”€ cache.py             # SQLite å“åº”ç¼“å­˜
â”‚   â”œâ”€â”€ retry.py             # é‡è¯•ç­–ç•¥
â”‚   â””â”€â”€ base.py              # Provider åŸºç±»
â”‚
â”œâ”€â”€ sandbox/                 # å®‰å…¨æ‰§è¡Œç¯å¢ƒ âœ…
â”‚   â”œâ”€â”€ executor.py          # å­è¿›ç¨‹éš”ç¦»
â”‚   â”œâ”€â”€ policy.py            # èµ„æºé™åˆ¶ä¸ç™½åå•
â”‚   â””â”€â”€ protocol.py          # æ‰§è¡Œåè®®
â”‚
â”œâ”€â”€ store/                   # æ•°æ®å­˜å‚¨ âœ…
â”‚   â”œâ”€â”€ database.py          # SQLite å­˜å‚¨
â”‚   â””â”€â”€ repository.py        # å€™é€‰è§£ä»“åº“
â”‚
â”œâ”€â”€ experiments/             # å®éªŒç¼–æ’ âœ…
â”‚   â”œâ”€â”€ cli.py               # Typer CLI å‘½ä»¤è¡Œ
â”‚   â”œâ”€â”€ runner.py            # å®éªŒè¿è¡Œå™¨ (å«å¤šæ¨¡å‹åä½œ)
â”‚   â”œâ”€â”€ config.py            # é…ç½®åŠ è½½
â”‚   â”œâ”€â”€ metrics.py           # æŒ‡æ ‡æ”¶é›†
â”‚   â”œâ”€â”€ plotting.py          # Matplotlib å¯è§†åŒ–
â”‚   â”œâ”€â”€ report.py            # Markdown æŠ¥å‘Šç”Ÿæˆ
â”‚   â”œâ”€â”€ compare.py           # A/B å¯¹æ¯”å·¥å…·
â”‚   â””â”€â”€ summary.py           # å®éªŒæ‘˜è¦
â”‚
â”œâ”€â”€ configs/                 # é…ç½®æ–‡ä»¶ âœ…
â”‚   â”œâ”€â”€ binpacking_deepseek.yaml
â”‚   â”œâ”€â”€ binpacking_openai.yaml
â”‚   â””â”€â”€ binpacking.yaml
â”‚
â”œâ”€â”€ data/orlib/              # OR-Library æ•°æ®é›† âœ…
â”‚
â”œâ”€â”€ artifacts/               # å®éªŒäº§å‡º (è‡ªåŠ¨ç”Ÿæˆ)
â”‚
â”œâ”€â”€ tests/                   # æµ‹è¯•å¥—ä»¶ âœ… (48+ æµ‹è¯•ç”¨ä¾‹)
â”‚   â””â”€â”€ test_*.py
â”‚
â””â”€â”€ docs/                    # æ–‡æ¡£
    â”œâ”€â”€ ARCHITECTURE.md      # ç³»ç»Ÿæ¶æ„è¯¦è§£
    â”œâ”€â”€ INNOVATION_POINTS.md # åˆ›æ–°ç‚¹è¯¦è§£
    â”œâ”€â”€ USAGE.md             # ä½¿ç”¨æŒ‡å—
    â””â”€â”€ ...
```

---

## ğŸš€ ä¸‰å¤§åˆ›æ–°ç‚¹ (å·²å®ç°)

### åˆ›æ–°ç‚¹ 1: åŠŸèƒ½çº§å»é‡ (Sample-Efficient FunSearch) âœ…

> **è¯¾ç¨‹å¯¹åº”**: "duplicate code-checking mechanism at functionality level"

**å®ç°ä½ç½®**: `funsearch_core/deduplication.py`

**ä¸¤é˜¶æ®µå»é‡æœºåˆ¶**:
1. **ä»£ç å“ˆå¸Œè¿‡æ»¤**: è§„èŒƒåŒ–ä»£ç  â†’ SHA256 å“ˆå¸Œ â†’ å¿«é€Ÿæ£€æµ‹æ–‡æœ¬ç›¸ä¼¼å˜ä½“
2. **è¡Œä¸ºç­¾åæ£€æµ‹**: åœ¨æ¢é’ˆå®ä¾‹ä¸Šè¿è¡Œ â†’ è®°å½•å†³ç­–æ¨¡å¼ â†’ æ£€æµ‹åŠŸèƒ½ç­‰ä»·å®ç°

**æ”¶ç›Š**: å‡å°‘ 20-40% é‡å¤è¯„ä¼°ï¼ŒèŠ‚çœ LLM API è°ƒç”¨

### åˆ›æ–°ç‚¹ 2: å¤šæ¨¡å‹åä½œ (Cost-Aware Search) âœ…

> **è¯¾ç¨‹å¯¹åº”**: æˆæœ¬æ„ŸçŸ¥æœç´¢ï¼Œå¹³è¡¡æ¢ç´¢ä¸å¼€å‘

**å®ç°ä½ç½®**: `experiments/runner.py`, `configs/*.yaml`

**åˆ†é˜¶æ®µæ¨¡å‹ç­–ç•¥**:
- **ç”Ÿæˆé˜¶æ®µ**: ä½¿ç”¨å»‰ä»·æ¨¡å‹ (DeepSeek-Chat, GPT-3.5) æ‰¹é‡ç”Ÿæˆå€™é€‰
- **ç²¾ç‚¼é˜¶æ®µ**: ä½¿ç”¨å¼ºå¤§æ¨¡å‹ (GPT-4) ä¼˜åŒ– Top-K å€™é€‰

**æ”¶ç›Š**: API æˆæœ¬é™ä½ ~87%ï¼Œè´¨é‡ä¸é™

### åˆ›æ–°ç‚¹ 3: å¤šæ ·æ€§é©±åŠ¨æœç´¢ (Novelty-Driven FunSearch) âœ…

> **è¯¾ç¨‹å¯¹åº”**: "explore different ways to solve the same problem"

**å®ç°ä½ç½®**: `funsearch_core/islands.py`, `funsearch_core/diversity.py`

**åŒé‡æœºåˆ¶**:
1. **å¤šå²›æ¨¡å‹**: å¤šä¸ªç‹¬ç«‹å­ç§ç¾¤å¹¶è¡Œè¿›åŒ–ï¼Œå®šæœŸè¿ç§»ä¼˜è´¨ä¸ªä½“
2. **è¡Œä¸ºç­¾åå¤šæ ·æ€§**: åŸºäºæ¢é’ˆå®ä¾‹çš„å†³ç­–æ¨¡å¼ï¼Œè¿‡æ»¤ç›¸ä¼¼è¡Œä¸ºå€™é€‰

**æ”¶ç›Š**: é¿å…è¿‡æ—©æ”¶æ•›ï¼Œæ¢ç´¢æ›´å¹¿æœç´¢ç©ºé—´

---

## ğŸ“Š å·¥ç¨‹ç‰¹æ€§

### æœç´¢è½¨è¿¹å¯è§‚æµ‹æ€§ âœ…
- **å®æ—¶è¿›åº¦æ¡**: tqdm æ˜¾ç¤ºå€™é€‰ç”Ÿæˆè¿›åº¦ã€é¢„è®¡æ€»æ—¶é—´
- **å®æ—¶æŒ‡æ ‡**: æ¯ä»£è®°å½•æœ€ä½³/å¹³å‡åˆ†æ•°ã€å¤±è´¥ç»Ÿè®¡
- **å¯è§†åŒ–**: è¿›åŒ–æ›²çº¿ã€å¤±è´¥åˆ†å¸ƒé¥¼å›¾
- **å·¥ä»¶ç®¡ç†**: é…ç½®å¿«ç…§ã€å€™é€‰æ•°æ®åº“ã€æœ€ä½³å€™é€‰å¯¼å‡º

### æ ‡å‡†åŸºå‡†æ•°æ®é›† âœ…
- **OR-Library**: 160 ä¸ªæ ‡å‡† Bin Packing å®ä¾‹
- **ä¸¤ç±»åˆ†å¸ƒ**: Uniform (u*) å’Œ Triplet (t*)
- **åŸºå‡†å¯¹æ¯”**: æ”¯æŒä¸ best_known æœ€ä¼˜è§£å¯¹æ¯”

### æ²™ç®±å®‰å…¨æ‰§è¡Œ âœ…
- **è¿›ç¨‹éš”ç¦»**: LLM ç”Ÿæˆä»£ç åœ¨ç‹¬ç«‹å­è¿›ç¨‹è¿è¡Œ
- **èµ„æºé™åˆ¶**: è¶…æ—¶ä¿æŠ¤ã€å¯¼å…¥ç™½åå•
- **å®‰å…¨ç­–ç•¥**: é˜»æ­¢ç½‘ç»œè®¿é—®ã€é™åˆ¶æ–‡ä»¶ç³»ç»Ÿ

---

## ğŸ“ˆ å®éªŒéªŒè¯

### å¿«é€Ÿè¿è¡Œ

```bash
# 1. è®¾ç½® API Key
echo "DEEPSEEK_API_KEY=sk-xxx" > .env

# 2. è¿è¡Œå®éªŒ
python run.py                        # é»˜è®¤é…ç½®
python run.py -d orlib -s large      # OR-Library å¤§å‹æ•°æ®é›†
python run.py -g 3 -p 3 -y           # å¿«é€Ÿæµ‹è¯• (~5åˆ†é’Ÿ)
python run.py --demo                 # æ¼”ç¤ºæ¨¡å¼ (æ— éœ€ API Key)
```

### éªŒè¯åˆ›æ–°ç‚¹

```bash
# éªŒè¯åŠŸèƒ½çº§å»é‡
python -m pytest tests/test_deduplication.py -v

# æ£€æŸ¥å»é‡ç»Ÿè®¡
sqlite3 artifacts/<run_id>/candidates.db \
  "SELECT COUNT(*) as total, 
          SUM(CASE WHEN json_extract(metadata, '$.skipped_duplicate') = 1 THEN 1 ELSE 0 END) as deduped
   FROM candidates;"

# éªŒè¯å¤šå²›å¤šæ ·æ€§
sqlite3 artifacts/<run_id>/candidates.db \
  "SELECT json_extract(metadata, '$.island_id') as island, 
          COUNT(DISTINCT signature) as unique_behaviors
   FROM candidates GROUP BY island;"
```

---

## ğŸ“… é¡¹ç›®æ—¶é—´çº¿

| é‡Œç¨‹ç¢‘ | æˆªæ­¢æ—¥æœŸ | çŠ¶æ€ |
|--------|----------|------|
| Project Proposal | 2026-02-24 | âœ… å·²å®Œæˆ |
| Project Milestone | 2026-03-31 | ğŸ”„ è¿›è¡Œä¸­ |
| Final Project | 2026-04-26 | ğŸ“‹ å¾…å®Œæˆ |

---

## ğŸ“ æ–‡æ¡£ç´¢å¼•

- [ARCHITECTURE.md](ARCHITECTURE.md) - ç³»ç»Ÿæ¶æ„è¯¦è§£
- [INNOVATION_POINTS.md](INNOVATION_POINTS.md) - åˆ›æ–°ç‚¹è¯¦è§£ä¸éªŒè¯
- [USAGE.md](USAGE.md) - å®Œæ•´ä½¿ç”¨æŒ‡å—
- [METRICS.md](METRICS.md) - æŒ‡æ ‡è¯´æ˜
- [RUNNING_EXPERIMENTS.md](RUNNING_EXPERIMENTS.md) - å®éªŒè¿è¡ŒæŒ‡å—
- [SANDBOX_LIMITATIONS.md](SANDBOX_LIMITATIONS.md) - æ²™ç®±é™åˆ¶è¯´æ˜

---

## å‚è€ƒæ–‡çŒ®

1. Romera-Paredes, B. et al. "Mathematical discoveries from program search with large language models." Nature (2023).
2. FunSearch Official: https://deepmind.google/discover/blog/funsearch-making-new-discoveries-in-mathematical-sciences-using-large-language-models/
3. OR-Library: http://people.brunel.ac.uk/~mastjjb/jeb/orlib/binpackinfo.html

